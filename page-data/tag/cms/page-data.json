{"componentChunkName":"component---src-templates-tag-template-js","path":"/tag/cms","result":{"data":{"site":{"siteMetadata":{"title":"Stefano's Space","subtitle":"Rare blog posts and some today-I-learned pills."}},"allMarkdownRemark":{"edges":[{"node":{"html":"<p>I was investigating if my controller was handling correctly post requests, when I noticed that it was being called twice.</p>\n<p>A quick look at the dev tools network panel showed there were indeed 2 requests, but the response size was different, and the second response preview was empty. According to Chrome the initiator of the request was some javascript at the bottom of the body.</p>\n<p>Baffled, I called the front end developer over, but we quickly proved that it wasn’t due to any javascript. The request was fired with javascript disabled, but now the initiator was <code class=\"language-text\">index.html:infinity</code>, infinity being the line of code where that happened. On my simpler example it actually shows the very last line of the html.</p>\n<h2 id=\"when-everything-else-fails-old-style-debugging\" style=\"position:relative;\"><a href=\"#when-everything-else-fails-old-style-debugging\" aria-label=\"when everything else fails old style debugging permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>When everything else fails: old style debugging</h2>\n<p>So…we started taking elements off the page, until it stopped.</p>\n<p>Turns out that <code class=\"language-text\">style=&quot;background-image: url(&#39;&#39;);&quot;</code> it’s interpreted as “the URL of the background image is an empty string, relative to the current URL”.</p>\n<p>You can double check this by opening your tools and going to <a href=\"/example/empty-background-image-url.html\">this example</a>.</p>\n<p>Initiator with javascript\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 759px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/00f659ec40552dcbaf668f390027cd18/ef3e1/initiator-with-js.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.583333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfklEQVQI12MwNjUFI3NjMyCyMDEzByJjUzMwaWJubnH89Plvv/9//Prrw9efT19/ePnu84s3nz58+fn9938GaztLFy9HJy8XFx83Wwc7U6AmCwtjYxMjY2NjIwNLc5NDJ87ef/7u+r2nj199ePb2y7O3nx8+f3f78avHrz4CAMs1P6nTSSRQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/00f659ec40552dcbaf668f390027cd18/8ac56/initiator-with-js.webp 240w,\n/static/00f659ec40552dcbaf668f390027cd18/d3be9/initiator-with-js.webp 480w,\n/static/00f659ec40552dcbaf668f390027cd18/3440c/initiator-with-js.webp 759w\"\n              sizes=\"(max-width: 759px) 100vw, 759px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/00f659ec40552dcbaf668f390027cd18/8ff5a/initiator-with-js.png 240w,\n/static/00f659ec40552dcbaf668f390027cd18/e85cb/initiator-with-js.png 480w,\n/static/00f659ec40552dcbaf668f390027cd18/ef3e1/initiator-with-js.png 759w\"\n            sizes=\"(max-width: 759px) 100vw, 759px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/00f659ec40552dcbaf668f390027cd18/ef3e1/initiator-with-js.png\"\n            alt=\"Initiator with javascript\"\n            title=\"Initiator with javascript\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Initiator without javascript\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 842px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8724162db473b51bfef502a4af72e9b6/99072/initiator-without-js.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeklEQVQI1yXC7QqCMBQAUB+oorbde3dlvW1QIL1N/4SiCS4rV2o17MsGHU6izRw1E6cY638GYjZmouQyW/ef4Xrv2/By56bybey7EN7D4/lNKEUVgQLSCgCQhJSzqUCCsRgtVllx6ja53R8uxbFx9c06n9tqV/ptWf8AoH9CtoIMyXcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8724162db473b51bfef502a4af72e9b6/8ac56/initiator-without-js.webp 240w,\n/static/8724162db473b51bfef502a4af72e9b6/d3be9/initiator-without-js.webp 480w,\n/static/8724162db473b51bfef502a4af72e9b6/6366e/initiator-without-js.webp 842w\"\n              sizes=\"(max-width: 842px) 100vw, 842px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8724162db473b51bfef502a4af72e9b6/8ff5a/initiator-without-js.png 240w,\n/static/8724162db473b51bfef502a4af72e9b6/e85cb/initiator-without-js.png 480w,\n/static/8724162db473b51bfef502a4af72e9b6/99072/initiator-without-js.png 842w\"\n            sizes=\"(max-width: 842px) 100vw, 842px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8724162db473b51bfef502a4af72e9b6/99072/initiator-without-js.png\"\n            alt=\"Initiator without javascript\"\n            title=\"Initiator without javascript\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>What happened is that I don’t enforce uploading images in the CMS, but if none is selected the URL is just null or empty. Writing <code class=\"language-text\">style=&quot;background-image: url(&#39;@(Model.Image?.Url)&#39;);&quot;</code> is incorrect, the rule should not be in the style attribute if the URL is blank.</p>\n<p>The solution is to write a variable for the content of the style attribute, something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"c#\"><pre class=\"language-c#\"><code class=\"language-c#\">var imageUrl = Model.Image?.Url;\nvar style = imageUrl == null\n    : string.Empty\n    ? $&quot;background-image: url(&#39;{imageUrl}&#39;);&quot;</code></pre></div>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=473528\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://bugzilla.mozilla.org/show_bug.cgi?id=473528</a></p>","fields":{"slug":"/posts/welcome-to-the-internet-you-don-t-know-shit-part-1","categorySlug":"/category/programming/"},"frontmatter":{"title":"Welcome to the Internet: You Don't Know Shit, Part 1","date":"2016-11-25T17:59:24.000Z","category":"Programming"}}}]}},"pageContext":{"tag":"CMS","currentPage":0,"postsLimit":8,"postsOffset":0,"prevPagePath":"/tag/cms","nextPagePath":"/tag/cms/page/1","hasPrevPage":false,"hasNextPage":false}},"staticQueryHashes":["1796801393","251939775","401334301"]}